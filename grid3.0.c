
struct fb_t {
unsigned short volatile  pixels[256][512];
};

struct fb_t *const fbp = ((struct fb_t*) 0x8000000);

int xn = 320;
int yn = 240;

int inner_box_left_margin = 35;
int inner_box_top_margin = 20;


unsigned short box1[] = {
	0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 
0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb, 0x42cb

};

unsigned short box2[] = {
	0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 
0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb, 0x82cb

};


unsigned short *box[2] = {box1, box2};

void
sprite_draw(struct fb_t *const fbp, unsigned short sprite[], int x, int y) {
 int sxi, syi;
 int xi, yi;
	
	for (sxi = 0; sxi < 16; sxi++)
		for (syi = 0; syi < 16; syi++) {
		   xi = x + sxi;
		   yi = y + syi;
     	   fbp->pixels[yi][xi] = sprite[syi*16+sxi];
	}
}


void 
draw_two_grid_box_horizontal(struct fb_t *const fbp, int row, int col){
	
	
	int x = inner_box_left_margin+(col-1)*33;
	int y = inner_box_top_margin+(row-1)*33;

	
	
	sprite_draw(fbp, box[0], x, y);
	sprite_draw(fbp, box[0], x, y+15);
   	sprite_draw(fbp, box[0], x+15, y);
	sprite_draw(fbp, box[0], x+15, y+15);
	
	sprite_draw(fbp, box[0], x+18, y+6);
	sprite_draw(fbp, box[0], x+18, y+9);
	
	sprite_draw(fbp, box[0], x+33, y);
	sprite_draw(fbp, box[0], x+33, y+15);
   	sprite_draw(fbp, box[0], x+48, y);
	sprite_draw(fbp, box[0], x+48, y+15);
	
	
	
}



void 
draw_two_grid_box_vertical(struct fb_t *const fbp, int row, int col){
	
	
	int x = inner_box_left_margin+(col-1)*33;
	int y = inner_box_top_margin+(row-1)*33;

	
	
	sprite_draw(fbp, box[0], x, y);
	sprite_draw(fbp, box[0], x, y+15);
   	sprite_draw(fbp, box[0], x+15, y);
	sprite_draw(fbp, box[0], x+15, y+15);
	
	sprite_draw(fbp, box[0], x+9, y+18);
	sprite_draw(fbp, box[0], x+6, y+18);
	
	sprite_draw(fbp, box[0], x, y+33);
	sprite_draw(fbp, box[0], x, y+48);
   	sprite_draw(fbp, box[0], x+15, y+33);
	sprite_draw(fbp, box[0], x+15, y+48);
	
	
	
}


void 
draw_three_grid_box_horizontal(struct fb_t *const fbp, int row, int col){
	
	
	int x = inner_box_left_margin+(col-1)*33;
	int y = inner_box_top_margin+(row-1)*33;

	
	
	sprite_draw(fbp, box[1], x, y);
	sprite_draw(fbp, box[1], x, y+15);
   	sprite_draw(fbp, box[1], x+15, y);
	sprite_draw(fbp, box[1], x+15, y+15);
	
	sprite_draw(fbp, box[1], x+18, y+6);
	sprite_draw(fbp, box[1], x+18, y+9);
	
	sprite_draw(fbp, box[1], x+33, y);
	sprite_draw(fbp, box[1], x+33, y+15);
   	sprite_draw(fbp, box[1], x+48, y);
	sprite_draw(fbp, box[1], x+48, y+15);
	
	
	sprite_draw(fbp, box[1], x+51, y+6);
	sprite_draw(fbp, box[1], x+51, y+9);
	
	
	sprite_draw(fbp, box[1], x+66, y);
	sprite_draw(fbp, box[1], x+66, y+15);
   	sprite_draw(fbp, box[1], x+81, y);
	sprite_draw(fbp, box[1], x+81, y+15);
	
	
	
	
}





void 
draw_three_grid_box_vertical(struct fb_t *const fbp, int row, int col){
	
	
	int x = inner_box_left_margin+(col-1)*33;
	int y = inner_box_top_margin+(row-1)*33;

	
	
	sprite_draw(fbp, box[1], x, y);
	sprite_draw(fbp, box[1], x, y+15);
   	sprite_draw(fbp, box[1], x+15, y);
	sprite_draw(fbp, box[1], x+15, y+15);
	
	sprite_draw(fbp, box[1], x+9, y+18);
	sprite_draw(fbp, box[1], x+6, y+18);
	
	sprite_draw(fbp, box[1], x, y+33);
	sprite_draw(fbp, box[1], x, y+48);
   	sprite_draw(fbp, box[1], x+15, y+33);
	sprite_draw(fbp, box[1], x+15, y+48);
	
	sprite_draw(fbp, box[1], x+9, y+51);
	sprite_draw(fbp, box[1], x+6, y+51);
	
	sprite_draw(fbp, box[1], x, y+66);
	sprite_draw(fbp, box[1], x, y+81);
   	sprite_draw(fbp, box[1], x+15, y+66);
	sprite_draw(fbp, box[1], x+15, y+81);
	
}






void
sprite_scroll(struct fb_t *const fbp) {
	
	

	draw_two_grid_box_horizontal(fbp, 1, 1);
	draw_two_grid_box_horizontal(fbp, 3, 5);
	
	
	draw_two_grid_box_vertical(fbp, 5, 5);
	draw_two_grid_box_vertical(fbp, 5, 2);
	
	
	draw_three_grid_box_vertical (fbp, 1, 4);
	
	
	draw_three_grid_box_horizontal (fbp, 4, 1);
}









int
main() {


int x, y;

	// make all white
for (x = 0; x < xn; x++)
for (y = 0; y < yn; y++) {
  fbp->pixels[y][x] = 0x0000;
  }
	//Outer Background
for (x = 0; x < xn; x++)
for (y = 0; y < yn; y++) {
  fbp->pixels[y][x] = 0xad11;
  }
	// Inner Box
for (x = inner_box_left_margin; x < (195+inner_box_left_margin); x++)
for (y = inner_box_top_margin; y < (195+inner_box_top_margin); y++) {
  fbp->pixels[y][x] = 0xffff;
  }
	

	sprite_scroll(fbp);  // ghost walking horizontally
	
}
